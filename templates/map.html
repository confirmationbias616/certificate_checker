<!DOCTYPE html>

<html>
<head>
  {% extends 'base.html' %}
  {% block head %}
  {% endblock %}
</head>
<body>
    {% block body %}
    &nbsp;
    <div style="width: 100%; text-align: center;">
        <form action="{{ url_for('set_location') }}" name = "set_location" method="POST">
            <div style="display: inline-block">
                <input type="text" name="location_string" size="20" {% if location_string %} value="{{ location_string }}" {% endif %} placeholder="Focus on specific region" autofocus style="float: left; border: 1px solid black">
                &emsp;
                <input type="text" name="text_search" size="20" {% if text_search %} value="{{ text_search }}" {% endif %} placeholder="List one or many keywords" autofocus style="float: left; border: 1px solid black">
                &emsp;
                <input type="submit" id="small_button" value="Explore!" style="width: 6em;" >
            </div>
            <div>
                <span style="font-size: 85%;">
                    <input type="checkbox" id="limit_daily" name="limit_daily" value="True" {% if limit_daily %} checked {% endif %}>
                    day-to-day view
                </span>
            </div>
        </form>
    </div>
    <hr style="border: 1px solid var(--outline);">
    <div style="width: 100%; text-align: center;">
        <div style="display: inline-block">
        {% if cert_count %}
            {% if limit_daily %}
            <form action="{{ url_for('rewind', start_date=start_date, end_date=end_date, start_coords_lat=start_coords_lat, start_coords_lng=start_coords_lng, start_zoom=start_zoom, region_size=region_size, limit_daily=limit_daily, skip='y', location_string=location_string, text_search=text_search) }}" name = "change_date" method="POST" style ='float: left; padding: 5px;'>
                    <input type="submit" id="small_button" value="<- 1y" style="width: 5em">
            </form>
            <form action="{{ url_for('rewind', start_date=start_date, end_date=end_date, start_coords_lat=start_coords_lat, start_coords_lng=start_coords_lng, start_zoom=start_zoom, region_size=region_size, limit_daily=limit_daily, skip='m', location_string=location_string, text_search=text_search) }}" name = "change_date" method="POST" style ='float: left; padding: 5px;'>
                    <input type="submit" id="small_button" value="<- 1m" style="width: 5em">
            </form>
            <form action="{{ url_for('rewind', start_date=start_date, end_date=end_date, start_coords_lat=start_coords_lat, start_coords_lng=start_coords_lng, start_zoom=start_zoom, region_size=region_size, limit_daily=limit_daily, skip='w', location_string=location_string, text_search=text_search) }}" name = "change_date" method="POST" style ='float: left; padding: 5px;'>
                    <input type="submit" id="small_button" value="<- 1w" style="width: 5em">
            </form>
            <form action="{{ url_for('rewind', start_date=start_date, end_date=end_date, start_coords_lat=start_coords_lat, start_coords_lng=start_coords_lng, start_zoom=start_zoom, region_size=region_size, limit_daily=limit_daily, skip='d', location_string=location_string, text_search=text_search) }}" name = "change_date" method="POST" style ='float: left; padding: 5px;'>
                    <input type="submit" id="small_button" value="<- 1d" style="width: 5em">
            </form>
            {% else %}
            <form action="{{ url_for('rewind', start_date=start_date, end_date=end_date, start_coords_lat=start_coords_lat, start_coords_lng=start_coords_lng, start_zoom=start_zoom, region_size=region_size, limit_daily=limit_daily, location_string=location_string, text_search=text_search) }}" name = "change_date" method="POST" style ='float: left; padding: 5px;'>
                <input type="submit" id="small_button" value="<- older" style="width: 5em">
            </form>
            {% endif %}
            
            <p align="center" style ='float: left; padding: 5px;'><strong>{{ cert_count }}</strong> CSP's for <strong>{{ start_date }}</strong>{% if not limit_daily %} to <strong>{{ end_date }}</strong>{% endif %}</p>
        {% else %}
            <p align="center" style ='float: left; padding: 5px;'><strong>Entirety of CSP history (> yr2000) has been explored for this region.</strong></p>
        {% endif %}
        </div>
    </div>
    {% include "map_widget.html" %}
    {% if text_search %}
    <hr style="border: 1px solid var(--outline);">
    <div align="center">
        <a href="static/wordcloud_{{ wc_id }}.png">
            <img src="static/wordcloud_{{ wc_id }}.png" alt="wordcloud not found" width=98%>
        </a>
    </div>
    
    {% endif %}
    {% endblock %}
</body>
</html>
    